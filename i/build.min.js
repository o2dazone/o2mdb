/*


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20130512
*/
'use strict';(function(l){l.o2={}})(window);
(function(l,h){function w(k,w){function F(c){return a.preferFlash&&N&&!a.ignoreFlash&&a.flash[c]!==h&&a.flash[c]}function r(c){return function(d){var e=this._s;!e||!e._a?(e&&e.id?a._wD(e.id+": Ignoring "+d.type):a._wD(G+"Ignoring "+d.type),d=null):d=c.call(this,d);return d}}this.setupOptions={url:k||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1E3,
wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,
usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus",
"audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=w||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130512";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};
this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var ca,a=this,K=null,n=null,G="HTML5::",
C,s=navigator.userAgent,p=l.location.href.toString(),f=document,v,y,Aa,q,L=[],V=!0,D,O=!1,z=!1,t=!1,m=!1,I=!1,u,pb=0,da,E,Ba,W,Ca,T,X,Y,Ua,Da,ma,P,na,Ea,Z,Fa,ea,oa,pa,$,Va,Ga,Wa=["log","info","warn","error"],Xa,Ha,Ya,fa=null,Ia=null,x,Ja,aa,Za,qa,ra,Q,A,ga=!1,Ka=!1,$a,ab,bb,sa=0,ha=null,ta,U=[],ua,H=null,cb,va,ia,R,wa,La,db,B,eb=Array.prototype.slice,J=!1,Ma,N,Na,fb,M,gb,Oa,xa,hb=0,ja=s.match(/(ipad|iphone|ipod)/i),ib=s.match(/android/i),S=s.match(/msie/i),qb=s.match(/webkit/i),ya=s.match(/safari/i)&&
!s.match(/chrome/i),Pa=s.match(/opera/i),rb=s.match(/firefox/i),Qa=s.match(/(mobile|pre\/|xoom)/i)||ja||ib,Ra=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&ya&&!s.match(/silk/i)&&s.match(/OS X 10_6_([3-7])/i),ka=l.console!==h&&console.log!==h,Sa=f.hasFocus!==h?f.hasFocus():null,za=ya&&(f.hasFocus===h||!f.hasFocus()),jb=!za,kb=/(mp3|mp4|mpa|m4a|m4b)/i,la=f.location?f.location.protocol.match(/http/i):null,lb=!la?"http://":"",mb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,
nb="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),sb=RegExp("\\.("+nb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!la;var Ta;try{Ta=Audio!==h&&(Pa&&opera!==h&&10>opera.version()?new Audio(null):new Audio).canPlayType!==h}catch(tb){Ta=!1}this.hasHTML5=Ta;this.setup=function(c){var d=!a.url;c!==h&&(t&&H&&a.ok()&&(c.flashVersion!==h||c.url!==h||c.html5Test!==h))&&Q(x("setupLate"));Ba(c);c&&(d&&(ea&&c.url!==h)&&a.beginDelayedInit(),
!ea&&(c.url!==h&&"complete"===f.readyState)&&setTimeout(Z,1));return a};this.supported=this.ok=function(){return H?t&&!m:a.useHTML5Audio&&a.hasHTML5};this.getMovie=function(a){return C(a)||f[a]||l[a]};this.createSound=function(c,d){function e(){g=qa(g);a.sounds[g.id]=new ca(g);a.soundIDs.push(g.id);return a.sounds[g.id]}var b,g;b=null;b="soundManager.createSound(): "+x(!t?"notReady":"notOK");if(!t||!a.ok())return Q(b),!1;d!==h&&(c={id:c,url:d});g=E(c);g.url=ta(g.url);void 0===g.id&&(g.id=a.setupOptions.idPrefix+
hb++);g.id.toString().charAt(0).match(/^[0-9]$/)&&a._wD("soundManager.createSound(): "+x("badID",g.id),2);a._wD("soundManager.createSound(): "+g.id+(g.url?" ("+g.url+")":""),1);if(A(g.id,!0))return a._wD("soundManager.createSound(): "+g.id+" exists",1),a.sounds[g.id];if(va(g))b=e(),a._wD(g.id+": Using HTML5"),b._setup_html5(g);else{if(a.html5Only)return a._wD(g.id+": No HTML5 support for this sound, and no Flash. Exiting."),e();if(a.html5.usingFlash&&g.url&&g.url.match(/data\:/i))return a._wD(g.id+
": data: URIs not supported via Flash. Exiting."),e();8<q&&(null===g.isMovieStar&&(g.isMovieStar=!(!g.serverURL&&!(g.type&&g.type.match(mb)||g.url&&g.url.match(sb)))),g.isMovieStar&&(a._wD("soundManager.createSound(): using MovieStar handling"),1<g.loops&&u("noNSLoop")));g=ra(g,"soundManager.createSound(): ");b=e();8===q?n._createSound(g.id,g.loops||1,g.usePolicyFile):(n._createSound(g.id,g.url,g.usePeakData,g.useWaveformData,g.useEQData,g.isMovieStar,g.isMovieStar?g.bufferTime:!1,g.loops||1,g.serverURL,
g.duration||null,g.autoPlay,!0,g.autoLoad,g.usePolicyFile),g.serverURL||(b.connected=!0,g.onconnect&&g.onconnect.apply(b)));!g.serverURL&&(g.autoLoad||g.autoPlay)&&b.load(g)}!g.serverURL&&g.autoPlay&&b.play();return b};this.destroySound=function(c,d){if(!A(c))return!1;var e=a.sounds[c],b;e._iO={};e.stop();e.unload();for(b=0;b<a.soundIDs.length;b++)if(a.soundIDs[b]===c){a.soundIDs.splice(b,1);break}d||e.destruct(!0);delete a.sounds[c];return!0};this.load=function(c,d){return!A(c)?!1:a.sounds[c].load(d)};
this.unload=function(c){return!A(c)?!1:a.sounds[c].unload()};this.onposition=this.onPosition=function(c,d,e,b){return!A(c)?!1:a.sounds[c].onposition(d,e,b)};this.clearOnPosition=function(c,d,e){return!A(c)?!1:a.sounds[c].clearOnPosition(d,e)};this.start=this.play=function(c,d){var e=null,b=d&&!(d instanceof Object);if(!t||!a.ok())return Q("soundManager.play(): "+x(!t?"notReady":"notOK")),!1;if(A(c,b))b&&(d={url:d});else{if(!b)return!1;b&&(d={url:d});d&&d.url&&(a._wD('soundManager.play(): Attempting to create "'+
c+'"',1),d.id=c,e=a.createSound(d).play())}null===e&&(e=a.sounds[c].play(d));return e};this.setPosition=function(c,d){return!A(c)?!1:a.sounds[c].setPosition(d)};this.stop=function(c){if(!A(c))return!1;a._wD("soundManager.stop("+c+")",1);return a.sounds[c].stop()};this.stopAll=function(){var c;a._wD("soundManager.stopAll()",1);for(c in a.sounds)a.sounds.hasOwnProperty(c)&&a.sounds[c].stop()};this.pause=function(c){return!A(c)?!1:a.sounds[c].pause()};this.pauseAll=function(){var c;for(c=a.soundIDs.length-
1;0<=c;c--)a.sounds[a.soundIDs[c]].pause()};this.resume=function(c){return!A(c)?!1:a.sounds[c].resume()};this.resumeAll=function(){var c;for(c=a.soundIDs.length-1;0<=c;c--)a.sounds[a.soundIDs[c]].resume()};this.togglePause=function(c){return!A(c)?!1:a.sounds[c].togglePause()};this.setPan=function(c,d){return!A(c)?!1:a.sounds[c].setPan(d)};this.setVolume=function(c,d){return!A(c)?!1:a.sounds[c].setVolume(d)};this.mute=function(c){var d=0;c instanceof String&&(c=null);if(c){if(!A(c))return!1;a._wD('soundManager.mute(): Muting "'+
c+'"');return a.sounds[c].mute()}a._wD("soundManager.mute(): Muting all sounds");for(d=a.soundIDs.length-1;0<=d;d--)a.sounds[a.soundIDs[d]].mute();return a.muted=!0};this.muteAll=function(){a.mute()};this.unmute=function(c){c instanceof String&&(c=null);if(c){if(!A(c))return!1;a._wD('soundManager.unmute(): Unmuting "'+c+'"');return a.sounds[c].unmute()}a._wD("soundManager.unmute(): Unmuting all sounds");for(c=a.soundIDs.length-1;0<=c;c--)a.sounds[a.soundIDs[c]].unmute();a.muted=!1;return!0};this.unmuteAll=
function(){a.unmute()};this.toggleMute=function(c){return!A(c)?!1:a.sounds[c].toggleMute()};this.getMemoryUse=function(){var a=0;n&&8!==q&&(a=parseInt(n._getMemoryUse(),10));return a};this.disable=function(c){var d;c===h&&(c=!1);if(m)return!1;m=!0;u("shutdown",1);for(d=a.soundIDs.length-1;0<=d;d--)Xa(a.sounds[a.soundIDs[d]]);da(c);B.remove(l,"load",X);return!0};this.canPlayMIME=function(c){var d;a.hasHTML5&&(d=ia({type:c}));!d&&H&&(d=c&&a.ok()?!!(8<q&&c.match(mb)||c.match(a.mimePattern)):null);return d};
this.canPlayURL=function(c){var d;a.hasHTML5&&(d=ia({url:c}));!d&&H&&(d=c&&a.ok()?!!c.match(a.filePattern):null);return d};this.canPlayLink=function(c){return c.type!==h&&c.type&&a.canPlayMIME(c.type)?!0:a.canPlayURL(c.href)};this.getSoundById=function(c,d){if(!c)return null;var e=a.sounds[c];!e&&!d&&a._wD('soundManager.getSoundById(): Sound "'+c+'" not found.',2);return e};this.onready=function(c,d){if("function"===typeof c)t&&a._wD(x("queue","onready")),d||(d=l),Ca("onready",c,d),T();else throw x("needFunction",
"onready");return!0};this.ontimeout=function(c,d){if("function"===typeof c)t&&a._wD(x("queue","ontimeout")),d||(d=l),Ca("ontimeout",c,d),T({type:"ontimeout"});else throw x("needFunction","ontimeout");return!0};this._writeDebug=function(c,d){var e,b;if(!a.debugMode)return!1;if(ka&&a.useConsole){if(d&&"object"===typeof d)console.log(c,d);else if(Wa[d]!==h)console[Wa[d]](c);else console.log(c);if(a.consoleOnly)return!0}e=C("soundmanager-debug");if(!e)return!1;b=f.createElement("div");0===++pb%2&&(b.className=
"sm2-alt");d=d===h?0:parseInt(d,10);b.appendChild(f.createTextNode(c));d&&(2<=d&&(b.style.fontWeight="bold"),3===d&&(b.style.color="#ff3333"));e.insertBefore(b,e.firstChild);return!0};-1!==p.indexOf("sm2-debug=alert")&&(this._writeDebug=function(a){l.alert(a)});this._wD=this._writeDebug;this._debug=function(){var c,d;u("currentObj",1);c=0;for(d=a.soundIDs.length;c<d;c++)a.sounds[a.soundIDs[c]]._debug()};this.reboot=function(c,d){a.soundIDs.length&&a._wD("Destroying "+a.soundIDs.length+" SMSound object"+
(1!==a.soundIDs.length?"s":"")+"...");var e,b,g;for(e=a.soundIDs.length-1;0<=e;e--)a.sounds[a.soundIDs[e]].destruct();if(n)try{S&&(Ia=n.innerHTML),fa=n.parentNode.removeChild(n)}catch(f){u("badRemove",2)}Ia=fa=H=n=null;a.enabled=ea=t=ga=Ka=O=z=m=J=a.swfLoaded=!1;a.soundIDs=[];a.sounds={};hb=0;if(c)L=[];else for(e in L)if(L.hasOwnProperty(e)){b=0;for(g=L[e].length;b<g;b++)L[e][b].fired=!1}d||a._wD("soundManager: Rebooting...");a.html5={usingFlash:null};a.flash={};a.html5Only=!1;a.ignoreFlash=!1;l.setTimeout(function(){Ea();
d||a.beginDelayedInit()},20);return a};this.reset=function(){u("reset");return a.reboot(!0,!0)};this.getMoviePercent=function(){return n&&"PercentLoaded"in n?n.PercentLoaded():null};this.beginDelayedInit=function(){I=!0;Z();setTimeout(function(){if(Ka)return!1;pa();na();return Ka=!0},20);Y()};this.destruct=function(){a._wD("soundManager.destruct()");a.disable(!0)};ca=function(c){var d,e,b=this,g,f,p,k,t,l,v=!1,m=[],y=0,r,I,s=null,F;e=d=null;this.sID=this.id=c.id;this.url=c.url;this._iO=this.instanceOptions=
this.options=E(c);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;F=this.url?!1:!0;this.id3={};this._debug=function(){a._wD(b.id+": Merged options:",b.options)};this.load=function(c){var d=null,e;c!==h?b._iO=E(c,b.options):(c=b.options,b._iO=c,s&&s!==b.url&&(u("manURL"),b._iO.url=b.url,b.url=null));b._iO.url||(b._iO.url=b.url);b._iO.url=ta(b._iO.url);e=b.instanceOptions=b._iO;a._wD(b.id+": load ("+e.url+")");if(!e.url&&!b.url)return a._wD(b.id+": load(): url is unassigned. Exiting.",
2),b;!b.isHTML5&&(8===q&&!b.url&&!e.autoPlay)&&a._wD(b.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1);if(e.url===b.url&&0!==b.readyState&&2!==b.readyState)return u("onURL",1),3===b.readyState&&e.onload&&xa(b,function(){e.onload.apply(b,[!!b.duration])}),b;b.loaded=!1;b.readyState=1;b.playState=0;b.id3={};if(va(e))d=b._setup_html5(e),d._called_load?a._wD(b.id+": Ignoring request to load again"):(b._html5_canplay=!1,b.url!==e.url&&(a._wD(u("manURL")+": "+e.url),b._a.src=
e.url,b.setPosition(0)),b._a.autobuffer="auto",b._a.preload="auto",b._a._called_load=!0,e.autoPlay&&b.play());else{if(a.html5Only)return a._wD(b.id+": No flash support. Exiting."),b;if(b._iO.url&&b._iO.url.match(/data\:/i))return a._wD(b.id+": data: URIs not supported via Flash. Exiting."),b;try{b.isHTML5=!1,b._iO=ra(qa(e)),e=b._iO,8===q?n._load(b.id,e.url,e.stream,e.autoPlay,e.usePolicyFile):n._load(b.id,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(g){u("smError",
2),D("onload",!1),$({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}b.url=e.url;return b};this.unload=function(){0!==b.readyState&&(a._wD(b.id+": unload()"),b.isHTML5?(k(),b._a&&(b._a.pause(),s=wa(b._a))):8===q?n._unload(b.id,"about:blank"):n._unload(b.id),g());return b};this.destruct=function(c){a._wD(b.id+": Destruct");b.isHTML5?(k(),b._a&&(b._a.pause(),wa(b._a),J||p(),b._a._s=null,b._a=null)):(b._iO.onfailure=null,n._destroySound(b.id));c||a.destroySound(b.id,!0)};this.start=this.play=function(c,
d){var e,g,f,p,k,m=!0,m=null;e=b.id+": play(): ";d=d===h?!0:d;c||(c={});b.url&&(b._iO.url=b.url);b._iO=E(b._iO,b.options);b._iO=E(c,b._iO);b._iO.url=ta(b._iO.url);b.instanceOptions=b._iO;if(!b.isHTML5&&b._iO.serverURL&&!b.connected)return b.getAutoPlay()||(a._wD(e+" Netstream not connected yet - setting autoPlay"),b.setAutoPlay(!0)),b;va(b._iO)&&(b._setup_html5(b._iO),t());1===b.playState&&!b.paused&&((g=b._iO.multiShot)?a._wD(e+"Already playing (multi-shot)",1):(a._wD(e+"Already playing (one-shot)",
1),b.isHTML5&&b.setPosition(b._iO.position),m=b));if(null!==m)return m;c.url&&c.url!==b.url&&(!b.readyState&&!b.isHTML5&&8===q&&F?F=!1:b.load(b._iO));b.loaded?a._wD(e.substr(0,e.lastIndexOf(":"))):0===b.readyState?(a._wD(e+"Attempting to load"),!b.isHTML5&&!a.html5Only?(b._iO.autoPlay=!0,b.load(b._iO)):b.isHTML5?b.load(b._iO):(a._wD(e+"Unsupported type. Exiting."),m=b),b.instanceOptions=b._iO):2===b.readyState?(a._wD(e+"Could not load - exiting",2),m=b):a._wD(e+"Loading - attempting to play...");
if(null!==m)return m;!b.isHTML5&&(9===q&&0<b.position&&b.position===b.duration)&&(a._wD(e+"Sound at end, resetting to position:0"),c.position=0);if(b.paused&&0<=b.position&&(!b._iO.serverURL||0<b.position))a._wD(e+"Resuming from paused state",1),b.resume();else{b._iO=E(c,b._iO);if(null!==b._iO.from&&null!==b._iO.to&&0===b.instanceCount&&0===b.playState&&!b._iO.serverURL){g=function(){b._iO=E(c,b._iO);b.play(b._iO)};if(b.isHTML5&&!b._html5_canplay)a._wD(e+"Beginning load for from/to case"),b.load({oncanplay:g}),
m=!1;else if(!b.isHTML5&&!b.loaded&&(!b.readyState||2!==b.readyState))a._wD(e+"Preloading for from/to case"),b.load({onload:g}),m=!1;if(null!==m)return m;b._iO=I()}(!b.instanceCount||b._iO.multiShotEvents||b.isHTML5&&b._iO.multiShot&&!J||!b.isHTML5&&8<q&&!b.getAutoPlay())&&b.instanceCount++;b._iO.onposition&&0===b.playState&&l(b);b.playState=1;b.paused=!1;b.position=b._iO.position!==h&&!isNaN(b._iO.position)?b._iO.position:0;b.isHTML5||(b._iO=ra(qa(b._iO)));b._iO.onplay&&d&&(b._iO.onplay.apply(b),
v=!0);b.setVolume(b._iO.volume,!0);b.setPan(b._iO.pan,!0);b.isHTML5?2>b.instanceCount?(t(),e=b._setup_html5(),b.setPosition(b._iO.position),e.play()):(a._wD(b.id+": Cloning Audio() for instance #"+b.instanceCount+"..."),f=new Audio(b._iO.url),p=function(){B.remove(f,"onended",p);b._onfinish(b);wa(f);f=null},k=function(){B.remove(f,"canplay",k);try{f.currentTime=b._iO.position/1E3}catch(a){Q(b.id+": multiShot play() failed to apply position of "+b._iO.position/1E3)}f.play()},B.add(f,"ended",p),b._iO.position?
B.add(f,"canplay",k):f.play()):(m=n._start(b.id,b._iO.loops||1,9===q?b.position:b.position/1E3,b._iO.multiShot||!1),9===q&&!m&&(a._wD(e+"No sound hardware, or 32-sound ceiling hit",2),b._iO.onplayerror&&b._iO.onplayerror.apply(b)))}return b};this.stop=function(c){var d=b._iO;1===b.playState&&(a._wD(b.id+": stop()"),b._onbufferchange(0),b._resetOnPosition(0),b.paused=!1,b.isHTML5||(b.playState=0),r(),d.to&&b.clearOnPosition(d.to),b.isHTML5?b._a&&(c=b.position,b.setPosition(0),b.position=c,b._a.pause(),
b.playState=0,b._onTimer(),k()):(n._stop(b.id,c),d.serverURL&&b.unload()),b.instanceCount=0,b._iO={},d.onstop&&d.onstop.apply(b));return b};this.setAutoPlay=function(c){a._wD(b.id+": Autoplay turned "+(c?"on":"off"));b._iO.autoPlay=c;b.isHTML5||(n._setAutoPlay(b.id,c),c&&(!b.instanceCount&&1===b.readyState)&&(b.instanceCount++,a._wD(b.id+": Incremented instance count to "+b.instanceCount)))};this.getAutoPlay=function(){return b._iO.autoPlay};this.setPosition=function(c){c===h&&(c=0);var d=b.isHTML5?
Math.max(c,0):Math.min(b.duration||b._iO.duration,Math.max(c,0));b.position=d;c=b.position/1E3;b._resetOnPosition(b.position);b._iO.position=d;if(b.isHTML5){if(b._a){if(b._html5_canplay){if(b._a.currentTime!==c){a._wD(b.id+": setPosition("+c+")");try{b._a.currentTime=c,(0===b.playState||b.paused)&&b._a.pause()}catch(e){a._wD(b.id+": setPosition("+c+") failed: "+e.message,2)}}}else if(c)return a._wD(b.id+": setPosition("+c+"): Cannot seek yet, sound not ready",2),b;b.paused&&b._onTimer(!0)}}else c=
9===q?b.position:c,b.readyState&&2!==b.readyState&&n._setPosition(b.id,c,b.paused||!b.playState,b._iO.multiShot);return b};this.pause=function(c){if(b.paused||0===b.playState&&1!==b.readyState)return b;a._wD(b.id+": pause()");b.paused=!0;b.isHTML5?(b._setup_html5().pause(),k()):(c||c===h)&&n._pause(b.id,b._iO.multiShot);b._iO.onpause&&b._iO.onpause.apply(b);return b};this.resume=function(){var c=b._iO;if(!b.paused)return b;a._wD(b.id+": resume()");b.paused=!1;b.playState=1;b.isHTML5?(b._setup_html5().play(),
t()):(c.isMovieStar&&!c.serverURL&&b.setPosition(b.position),n._pause(b.id,c.multiShot));!v&&c.onplay?(c.onplay.apply(b),v=!0):c.onresume&&c.onresume.apply(b);return b};this.togglePause=function(){a._wD(b.id+": togglePause()");if(0===b.playState)return b.play({position:9===q&&!b.isHTML5?b.position:b.position/1E3}),b;b.paused?b.resume():b.pause();return b};this.setPan=function(c,a){c===h&&(c=0);a===h&&(a=!1);b.isHTML5||n._setPan(b.id,c);b._iO.pan=c;a||(b.pan=c,b.options.pan=c);return b};this.setVolume=
function(c,d){c===h&&(c=100);d===h&&(d=!1);b.isHTML5?b._a&&(b._a.volume=Math.max(0,Math.min(1,c/100))):n._setVolume(b.id,a.muted&&!b.muted||b.muted?0:c);b._iO.volume=c;d||(b.volume=c,b.options.volume=c);return b};this.mute=function(){b.muted=!0;b.isHTML5?b._a&&(b._a.muted=!0):n._setVolume(b.id,0);return b};this.unmute=function(){b.muted=!1;var c=b._iO.volume!==h;b.isHTML5?b._a&&(b._a.muted=!1):n._setVolume(b.id,c?b._iO.volume:b.options.volume);return b};this.toggleMute=function(){return b.muted?b.unmute():
b.mute()};this.onposition=this.onPosition=function(c,a,d){m.push({position:parseInt(c,10),method:a,scope:d!==h?d:b,fired:!1});return b};this.clearOnPosition=function(b,c){var a;b=parseInt(b,10);if(isNaN(b))return!1;for(a=0;a<m.length;a++)if(b===m[a].position&&(!c||c===m[a].method))m[a].fired&&y--,m.splice(a,1)};this._processOnPosition=function(){var c,a;c=m.length;if(!c||!b.playState||y>=c)return!1;for(c-=1;0<=c;c--)a=m[c],!a.fired&&b.position>=a.position&&(a.fired=!0,y++,a.method.apply(a.scope,[a.position]));
return!0};this._resetOnPosition=function(b){var c,a;c=m.length;if(!c)return!1;for(c-=1;0<=c;c--)a=m[c],a.fired&&b<=a.position&&(a.fired=!1,y--);return!0};I=function(){var c=b._iO,d=c.from,e=c.to,g,f;f=function(){a._wD(b.id+': "To" time of '+e+" reached.");b.clearOnPosition(e,f);b.stop()};g=function(){a._wD(b.id+': Playing "from" '+d);if(null!==e&&!isNaN(e))b.onPosition(e,f)};null!==d&&!isNaN(d)&&(c.position=d,c.multiShot=!1,g());return c};l=function(){var c,a=b._iO.onposition;if(a)for(c in a)if(a.hasOwnProperty(c))b.onPosition(parseInt(c,
10),a[c])};r=function(){var c,a=b._iO.onposition;if(a)for(c in a)a.hasOwnProperty(c)&&b.clearOnPosition(parseInt(c,10))};t=function(){b.isHTML5&&$a(b)};k=function(){b.isHTML5&&ab(b)};g=function(c){c||(m=[],y=0);v=!1;b._hasTimer=null;b._a=null;b._html5_canplay=!1;b.bytesLoaded=null;b.bytesTotal=null;b.duration=b._iO&&b._iO.duration?b._iO.duration:null;b.durationEstimate=null;b.buffered=[];b.eqData=[];b.eqData.left=[];b.eqData.right=[];b.failures=0;b.isBuffering=!1;b.instanceOptions={};b.instanceCount=
0;b.loaded=!1;b.metadata={};b.readyState=0;b.muted=!1;b.paused=!1;b.peakData={left:0,right:0};b.waveformData={left:[],right:[]};b.playState=0;b.position=null;b.id3={}};g();this._onTimer=function(c){var a,g=!1,f={};if(b._hasTimer||c){if(b._a&&(c||(0<b.playState||1===b.readyState)&&!b.paused))a=b._get_html5_duration(),a!==d&&(d=a,b.duration=a,g=!0),b.durationEstimate=b.duration,a=1E3*b._a.currentTime||0,a!==e&&(e=a,g=!0),(g||c)&&b._whileplaying(a,f,f,f,f);return g}};this._get_html5_duration=function(){var c=
b._iO;return(c=b._a&&b._a.duration?1E3*b._a.duration:c&&c.duration?c.duration:null)&&!isNaN(c)&&Infinity!==c?c:null};this._apply_loop=function(b,c){!b.loop&&1<c&&a._wD("Note: Native HTML5 looping is infinite.",1);b.loop=1<c?"loop":""};this._setup_html5=function(c){c=E(b._iO,c);var a=J?K:b._a,d=decodeURI(c.url),e;J?d===decodeURI(Ma)&&(e=!0):d===decodeURI(s)&&(e=!0);if(a){if(a._s)if(J)a._s&&(a._s.playState&&!e)&&a._s.stop();else if(!J&&d===decodeURI(s))return b._apply_loop(a,c.loops),a;e||(g(!1),a.src=
c.url,Ma=s=b.url=c.url,a._called_load=!1)}else b._a=c.autoLoad||c.autoPlay?new Audio(c.url):Pa&&10>opera.version()?new Audio(null):new Audio,a=b._a,a._called_load=!1,J&&(K=a);b.isHTML5=!0;b._a=a;a._s=b;f();b._apply_loop(a,c.loops);c.autoLoad||c.autoPlay?b.load():(a.autobuffer=!1,a.preload="auto");return a};f=function(){if(b._a._added_events)return!1;var c;b._a._added_events=!0;for(c in M)M.hasOwnProperty(c)&&b._a&&b._a.addEventListener(c,M[c],!1);return!0};p=function(){var c;a._wD(b.id+": Removing event listeners");
b._a._added_events=!1;for(c in M)M.hasOwnProperty(c)&&b._a&&b._a.removeEventListener(c,M[c],!1)};this._onload=function(c){var d=!!c||!b.isHTML5&&8===q&&b.duration;c=b.id+": ";a._wD(c+(d?"onload()":"Failed to load / invalid sound?"+(!b.duration?" Zero-length duration reported.":" -")+" ("+b.url+")"),d?1:2);!d&&!b.isHTML5&&(!0===a.sandbox.noRemote&&a._wD(c+x("noNet"),1),!0===a.sandbox.noLocal&&a._wD(c+x("noLocal"),1));b.loaded=d;b.readyState=d?3:2;b._onbufferchange(0);b._iO.onload&&xa(b,function(){b._iO.onload.apply(b,
[d])});return!0};this._onbufferchange=function(c){if(0===b.playState||c&&b.isBuffering||!c&&!b.isBuffering)return!1;b.isBuffering=1===c;b._iO.onbufferchange&&(a._wD(b.id+": Buffer state change: "+c),b._iO.onbufferchange.apply(b));return!0};this._onsuspend=function(){b._iO.onsuspend&&(a._wD(b.id+": Playback suspended"),b._iO.onsuspend.apply(b));return!0};this._onfailure=function(c,d,e){b.failures++;a._wD(b.id+": Failures = "+b.failures);if(b._iO.onfailure&&1===b.failures)b._iO.onfailure(b,c,d,e);else a._wD(b.id+
": Ignoring failure")};this._onfinish=function(){var c=b._iO.onfinish;b._onbufferchange(0);b._resetOnPosition(0);if(b.instanceCount&&(b.instanceCount--,b.instanceCount||(r(),b.playState=0,b.paused=!1,b.instanceCount=0,b.instanceOptions={},b._iO={},k(),b.isHTML5&&(b.position=0)),(!b.instanceCount||b._iO.multiShotEvents)&&c))a._wD(b.id+": onfinish()"),xa(b,function(){c.apply(b)})};this._whileloading=function(c,a,d,e){var g=b._iO;b.bytesLoaded=c;b.bytesTotal=a;b.duration=Math.floor(d);b.bufferLength=
e;b.durationEstimate=!b.isHTML5&&!g.isMovieStar?g.duration?b.duration>g.duration?b.duration:g.duration:parseInt(b.bytesTotal/b.bytesLoaded*b.duration,10):b.duration;b.isHTML5||(b.buffered=[{start:0,end:b.duration}]);(3!==b.readyState||b.isHTML5)&&g.whileloading&&g.whileloading.apply(b)};this._whileplaying=function(c,a,d,e,g){var f=b._iO;if(isNaN(c)||null===c)return!1;b.position=Math.max(0,c);b._processOnPosition();!b.isHTML5&&8<q&&(f.usePeakData&&(a!==h&&a)&&(b.peakData={left:a.leftPeak,right:a.rightPeak}),
f.useWaveformData&&(d!==h&&d)&&(b.waveformData={left:d.split(","),right:e.split(",")}),f.useEQData&&(g!==h&&g&&g.leftEQ)&&(c=g.leftEQ.split(","),b.eqData=c,b.eqData.left=c,g.rightEQ!==h&&g.rightEQ&&(b.eqData.right=g.rightEQ.split(","))));1===b.playState&&(!b.isHTML5&&(8===q&&!b.position&&b.isBuffering)&&b._onbufferchange(0),f.whileplaying&&f.whileplaying.apply(b));return!0};this._oncaptiondata=function(c){a._wD(b.id+": Caption data received.");b.captiondata=c;b._iO.oncaptiondata&&b._iO.oncaptiondata.apply(b,
[c])};this._onmetadata=function(c,d){a._wD(b.id+": Metadata received.");var e={},g,f;g=0;for(f=c.length;g<f;g++)e[c[g]]=d[g];b.metadata=e;b._iO.onmetadata&&b._iO.onmetadata.apply(b)};this._onid3=function(c,d){a._wD(b.id+": ID3 data received.");var e=[],g,f;g=0;for(f=c.length;g<f;g++)e[c[g]]=d[g];b.id3=E(b.id3,e);b._iO.onid3&&b._iO.onid3.apply(b)};this._onconnect=function(c){c=1===c;a._wD(b.id+": "+(c?"Connected.":"Failed to connect? - "+b.url),c?1:2);if(b.connected=c)b.failures=0,A(b.id)&&(b.getAutoPlay()?
b.play(h,b.getAutoPlay()):b._iO.autoLoad&&b.load()),b._iO.onconnect&&b._iO.onconnect.apply(b,[c])};this._ondataerror=function(c){0<b.playState&&(a._wD(b.id+": Data error: "+c),b._iO.ondataerror&&b._iO.ondataerror.apply(b))};this._debug()};oa=function(){return f.body||f._docElement||f.getElementsByTagName("div")[0]};C=function(c){return f.getElementById(c)};E=function(c,d){var e=c||{},b,g;b=d===h?a.defaultOptions:d;for(g in b)b.hasOwnProperty(g)&&e[g]===h&&(e[g]="object"!==typeof b[g]||null===b[g]?
b[g]:E(e[g],b[g]));return e};xa=function(c,a){!c.isHTML5&&8===q?l.setTimeout(a,0):a()};W={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};Ba=function(c,d){var e,b=!0,g=d!==h,f=a.setupOptions;if(c===h){b=[];for(e in f)f.hasOwnProperty(e)&&b.push(e);for(e in W)W.hasOwnProperty(e)&&("object"===typeof a[e]?b.push(e+": {...}"):a[e]instanceof Function?b.push(e+": function() {...}"):b.push(e));a._wD(x("setup",b.join(", ")));return!1}for(e in c)if(c.hasOwnProperty(e))if("object"!==
typeof c[e]||null===c[e]||c[e]instanceof Array||c[e]instanceof RegExp)g&&W[d]!==h?a[d][e]=c[e]:f[e]!==h?(a.setupOptions[e]=c[e],a[e]=c[e]):W[e]===h?(Q(x(a[e]===h?"setupUndef":"setupError",e),2),b=!1):a[e]instanceof Function?a[e].apply(a,c[e]instanceof Array?c[e]:[c[e]]):a[e]=c[e];else if(W[e]===h)Q(x(a[e]===h?"setupUndef":"setupError",e),2),b=!1;else return Ba(c[e],e);return b};B=function(){function c(b){b=eb.call(b);var c=b.length;e?(b[1]="on"+b[1],3<c&&b.pop()):3===c&&b.push(!1);return b}function a(c,
d){var f=c.shift(),p=[b[d]];if(e)f[p](c[0],c[1]);else f[p].apply(f,c)}var e=l.attachEvent,b={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:function(){a(c(arguments),"add")},remove:function(){a(c(arguments),"remove")}}}();M={abort:r(function(){a._wD(this._s.id+": abort")}),canplay:r(function(){var c=this._s,d;if(c._html5_canplay)return!0;c._html5_canplay=!0;a._wD(c.id+": canplay");c._onbufferchange(0);d=c._iO.position!==h&&!isNaN(c._iO.position)?c._iO.position/
1E3:null;if(c.position&&this.currentTime!==d){a._wD(c.id+": canplay: Setting position to "+d);try{this.currentTime=d}catch(e){a._wD(c.id+": canplay: Setting position of "+d+" failed: "+e.message,2)}}c._iO._oncanplay&&c._iO._oncanplay()}),canplaythrough:r(function(){var c=this._s;c.loaded||(c._onbufferchange(0),c._whileloading(c.bytesLoaded,c.bytesTotal,c._get_html5_duration()),c._onload(!0))}),ended:r(function(){var c=this._s;a._wD(c.id+": ended");c._onfinish()}),error:r(function(){a._wD(this._s.id+
": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:r(function(){var c=this._s;a._wD(c.id+": loadeddata");!c._loaded&&!ya&&(c.duration=c._get_html5_duration())}),loadedmetadata:r(function(){a._wD(this._s.id+": loadedmetadata")}),loadstart:r(function(){a._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:r(function(){this._s._onbufferchange(0)}),playing:r(function(){a._wD(this._s.id+": playing");this._s._onbufferchange(0)}),progress:r(function(c){var d=this._s,e,b,
g;e=0;var f="progress"===c.type,p=c.target.buffered,h=c.loaded||0,m=c.total||1;d.buffered=[];if(p&&p.length){e=0;for(b=p.length;e<b;e++)d.buffered.push({start:1E3*p.start(e),end:1E3*p.end(e)});e=1E3*(p.end(0)-p.start(0));h=Math.min(1,e/(1E3*c.target.duration));if(f&&1<p.length){g=[];b=p.length;for(e=0;e<b;e++)g.push(1E3*c.target.buffered.start(e)+"-"+1E3*c.target.buffered.end(e));a._wD(this._s.id+": progress, timeRanges: "+g.join(", "))}f&&!isNaN(h)&&a._wD(this._s.id+": progress, "+Math.floor(100*
h)+"% loaded")}isNaN(h)||(d._onbufferchange(0),d._whileloading(h,m,d._get_html5_duration()),h&&(m&&h===m)&&M.canplaythrough.call(this,c))}),ratechange:r(function(){a._wD(this._s.id+": ratechange")}),suspend:r(function(c){var d=this._s;a._wD(this._s.id+": suspend");M.progress.call(this,c);d._onsuspend()}),stalled:r(function(){a._wD(this._s.id+": stalled")}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var c=this._s;a._wD(this._s.id+": waiting");c._onbufferchange(1)})};va=function(c){return!c||
!c.type&&!c.url&&!c.serverURL?!1:c.serverURL||c.type&&F(c.type)?!1:c.type?ia({type:c.type}):ia({url:c.url})||a.html5Only||c.url.match(/data\:/i)};wa=function(c){var a;c&&(a=ya&&!ja?null:rb?"about:blank":null,c.src=a,void 0!==c._called_unload&&(c._called_load=!1));J&&(Ma=null);return a};ia=function(c){if(!a.useHTML5Audio||!a.hasHTML5)return!1;var d=c.url||null;c=c.type||null;var e=a.audioFormats,b;if(c&&a.html5[c]!==h)return a.html5[c]&&!F(c);if(!R){R=[];for(b in e)e.hasOwnProperty(b)&&(R.push(b),
e[b].related&&(R=R.concat(e[b].related)));R=RegExp("\\.("+R.join("|")+")(\\?.*)?$","i")}b=d?d.toLowerCase().match(R):null;!b||!b.length?c&&(d=c.indexOf(";"),b=(-1!==d?c.substr(0,d):c).substr(6)):b=b[1];b&&a.html5[b]!==h?d=a.html5[b]&&!F(b):(c="audio/"+b,d=a.html5.canPlayType({type:c}),d=(a.html5[b]=d)&&a.html5[c]&&!F(c));return d};db=function(){function c(b){var c,e,f=c=!1;if(!d||"function"!==typeof d.canPlayType)return c;if(b instanceof Array){c=0;for(e=b.length;c<e;c++)if(a.html5[b[c]]||d.canPlayType(b[c]).match(a.html5Test))f=
!0,a.html5[b[c]]=!0,a.flash[b[c]]=!!b[c].match(kb);c=f}else b=d&&"function"===typeof d.canPlayType?d.canPlayType(b):!1,c=!(!b||!b.match(a.html5Test));return c}if(!a.useHTML5Audio||!a.hasHTML5)return H=a.html5.usingFlash=!0,!1;var d=Audio!==h?Pa&&10>opera.version()?new Audio(null):new Audio:null,e,b,g={},f;f=a.audioFormats;for(e in f)if(f.hasOwnProperty(e)&&(b="audio/"+e,g[e]=c(f[e].type),g[b]=g[e],e.match(kb)?(a.flash[e]=!0,a.flash[b]=!0):(a.flash[e]=!1,a.flash[b]=!1),f[e]&&f[e].related))for(b=f[e].related.length-
1;0<=b;b--)g["audio/"+f[e].related[b]]=g[e],a.html5[f[e].related[b]]=g[e],a.flash[f[e].related[b]]=g[e];g.canPlayType=d?c:null;a.html5=E(a.html5,g);a.html5.usingFlash=cb();H=a.html5.usingFlash;return!0};P={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",
checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+f.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",
waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",
secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",
fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",
needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",
noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};x=function(){var c=eb.call(arguments),a=c.shift(),a=P&&P[a]?P[a]:"",e,b;if(a&&c&&c.length){e=0;for(b=c.length;e<b;e++)a=a.replace("%s",c[e])}return a};qa=function(c){8===q&&(1<c.loops&&c.stream)&&
(u("as2loop"),c.stream=!1);return c};ra=function(c,d){if(c&&!c.usePolicyFile&&(c.onid3||c.usePeakData||c.useWaveformData||c.useEQData))a._wD((d||"")+x("policy")),c.usePolicyFile=!0;return c};Q=function(c){ka&&console.warn!==h?console.warn(c):a._wD(c)};v=function(){return!1};Xa=function(c){for(var a in c)c.hasOwnProperty(a)&&"function"===typeof c[a]&&(c[a]=v)};Ha=function(c){c===h&&(c=!1);(m||c)&&a.disable(c)};Ya=function(c){var d=null;if(c)if(c.match(/\.swf(\?.*)?$/i)){if(d=c.substr(c.toLowerCase().lastIndexOf(".swf?")+
4))return c}else c.lastIndexOf("/")!==c.length-1&&(c+="/");c=(c&&-1!==c.lastIndexOf("/")?c.substr(0,c.lastIndexOf("/")+1):"./")+a.movieURL;a.noSWFCache&&(c+="?ts="+(new Date).getTime());return c};Da=function(){q=parseInt(a.flashVersion,10);8!==q&&9!==q&&(a._wD(x("badFV",q,8)),a.flashVersion=q=8);var c=a.debugMode||a.debugFlash?"_debug.swf":".swf";a.useHTML5Audio&&(!a.html5Only&&a.audioFormats.mp4.required&&9>q)&&(a._wD(x("needfl9")),a.flashVersion=q=9);a.version=a.versionNumber+(a.html5Only?" (HTML5-only mode)":
9===q?" (AS3/Flash 9)":" (AS2/Flash 8)");8<q?(a.defaultOptions=E(a.defaultOptions,a.flash9Options),a.features.buffering=!0,a.defaultOptions=E(a.defaultOptions,a.movieStarOptions),a.filePatterns.flash9=RegExp("\\.(mp3|"+nb.join("|")+")(\\?.*)?$","i"),a.features.movieStar=!0):a.features.movieStar=!1;a.filePattern=a.filePatterns[8!==q?"flash9":"flash8"];a.movieURL=(8===q?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",c);a.features.peakData=a.features.waveformData=a.features.eqData=8<
q};Va=function(c,a){if(!n)return!1;n._setPolling(c,a)};Ga=function(){a.debugURLParam.test(p)&&(a.debugMode=!0);if(C(a.debugID))return!1;var c,d,e,b;if(a.debugMode&&!C(a.debugID)&&(!ka||!a.useConsole||!a.consoleOnly)){c=f.createElement("div");c.id=a.debugID+"-toggle";d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};c.appendChild(f.createTextNode("-"));
c.onclick=Za;c.title="Toggle SM2 debug console";s.match(/msie 6/i)&&(c.style.position="absolute",c.style.cursor="hand");for(b in d)d.hasOwnProperty(b)&&(c.style[b]=d[b]);d=f.createElement("div");d.id=a.debugID;d.style.display=a.debugMode?"block":"none";if(a.debugMode&&!C(c.id)){try{e=oa(),e.appendChild(c)}catch(g){throw Error(x("domError")+" \n"+g.toString());}e.appendChild(d)}}};A=this.getSoundById;u=function(c,d){return!c?"":a._wD(x(c),d)};Za=function(){var c=C(a.debugID),d=C(a.debugID+"-toggle");
if(!c)return!1;V?(d.innerHTML="+",c.style.display="none"):(d.innerHTML="-",c.style.display="block");V=!V};D=function(c,a,e){if(l.sm2Debugger!==h)try{sm2Debugger.handleEvent(c,a,e)}catch(b){return!1}return!0};aa=function(){var c=[];a.debugMode&&c.push("sm2_debug");a.debugFlash&&c.push("flash_debug");a.useHighPerformance&&c.push("high_performance");return c.join(" ")};Ja=function(){var c=x("fbHandler"),d=a.getMoviePercent(),e={type:"FLASHBLOCK"};if(a.html5Only)return!1;a.ok()?(a.didFlashBlock&&a._wD(c+
": Unblocked"),a.oMC&&(a.oMC.className=[aa(),"movieContainer","swf_loaded"+(a.didFlashBlock?" swf_unblocked":"")].join(" "))):(H&&(a.oMC.className=aa()+" movieContainer "+(null===d?"swf_timedout":"swf_error"),a._wD(c+": "+x("fbTimeout")+(d?" ("+x("fbLoaded")+")":""))),a.didFlashBlock=!0,T({type:"ontimeout",ignoreInit:!0,error:e}),$(e))};Ca=function(c,a,e){L[c]===h&&(L[c]=[]);L[c].push({method:a,scope:e||null,fired:!1})};T=function(c){c||(c={type:a.ok()?"onready":"ontimeout"});if(!t&&c&&!c.ignoreInit||
"ontimeout"===c.type&&(a.ok()||m&&!c.ignoreInit))return!1;var d={success:c&&c.ignoreInit?a.ok():!m},e=c&&c.type?L[c.type]||[]:[],b=[],f,d=[d],p=H&&!a.ok();c.error&&(d[0].error=c.error);c=0;for(f=e.length;c<f;c++)!0!==e[c].fired&&b.push(e[c]);if(b.length){c=0;for(f=b.length;c<f;c++)b[c].scope?b[c].method.apply(b[c].scope,d):b[c].method.apply(this,d),p||(b[c].fired=!0)}return!0};X=function(){l.setTimeout(function(){a.useFlashBlock&&Ja();T();"function"===typeof a.onload&&(u("onload",1),a.onload.apply(l),
u("onloadOK",1));a.waitForWindowLoad&&B.add(l,"load",X)},1)};Na=function(){if(N!==h)return N;var c=!1,a=navigator,e=a.plugins,b,f=l.ActiveXObject;if(e&&e.length)(a=a.mimeTypes)&&(a["application/x-shockwave-flash"]&&a["application/x-shockwave-flash"].enabledPlugin&&a["application/x-shockwave-flash"].enabledPlugin.description)&&(c=!0);else if(f!==h&&!s.match(/MSAppHost/i)){try{b=new f("ShockwaveFlash.ShockwaveFlash")}catch(p){b=null}c=!!b}return N=c};cb=function(){var c,d,e=a.audioFormats;if(ja&&s.match(/os (1|2|3_0|3_1)/i))a.hasHTML5=
!1,a.html5Only=!0,a.oMC&&(a.oMC.style.display="none");else if(a.useHTML5Audio){if(!a.html5||!a.html5.canPlayType)a._wD("SoundManager: No HTML5 Audio() support detected."),a.hasHTML5=!1;Ra&&a._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!N?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}if(a.useHTML5Audio&&a.hasHTML5)for(d in ua=!0,e)if(e.hasOwnProperty(d)&&
e[d].required)if(a.html5.canPlayType(e[d].type)){if(a.preferFlash&&(a.flash[d]||a.flash[e[d].type]))c=!0}else ua=!1,c=!0;a.ignoreFlash&&(c=!1,ua=!0);a.html5Only=a.hasHTML5&&a.useHTML5Audio&&!c;return!a.html5Only};ta=function(c){var d,e,b=0;if(c instanceof Array){d=0;for(e=c.length;d<e;d++)if(c[d]instanceof Object){if(a.canPlayMIME(c[d].type)){b=d;break}}else if(a.canPlayURL(c[d])){b=d;break}c[b].url&&(c[b]=c[b].url);c=c[b]}return c};$a=function(c){c._hasTimer||(c._hasTimer=!0,!Qa&&a.html5PollingInterval&&
(null===ha&&0===sa&&(ha=setInterval(bb,a.html5PollingInterval)),sa++))};ab=function(c){c._hasTimer&&(c._hasTimer=!1,!Qa&&a.html5PollingInterval&&sa--)};bb=function(){var c;if(null!==ha&&!sa)return clearInterval(ha),ha=null,!1;for(c=a.soundIDs.length-1;0<=c;c--)a.sounds[a.soundIDs[c]].isHTML5&&a.sounds[a.soundIDs[c]]._hasTimer&&a.sounds[a.soundIDs[c]]._onTimer()};$=function(c){c=c!==h?c:{};"function"===typeof a.onerror&&a.onerror.apply(l,[{type:c.type!==h?c.type:null}]);c.fatal!==h&&c.fatal&&a.disable()};
fb=function(){if(!Ra||!Na())return!1;var c=a.audioFormats,d,e;for(e in c)if(c.hasOwnProperty(e)&&("mp3"===e||"mp4"===e))if(a._wD("soundManager: Using flash fallback for "+e+" format"),a.html5[e]=!1,c[e]&&c[e].related)for(d=c[e].related.length-1;0<=d;d--)a.html5[c[e].related[d]]=!1};this._setSandboxType=function(c){var d=a.sandbox;d.type=c;d.description=d.types[d.types[c]!==h?c:"unknown"];"localWithFile"===d.type?(d.noRemote=!0,d.noLocal=!1,u("secNote",2)):"localWithNetwork"===d.type?(d.noRemote=!1,
d.noLocal=!0):"localTrusted"===d.type&&(d.noRemote=!1,d.noLocal=!1)};this._externalInterfaceOK=function(c){if(a.swfLoaded)return!1;var d;D("swf",!0);D("flashtojs",!0);a.swfLoaded=!0;za=!1;Ra&&fb();if(!c||c.replace(/\+dev/i,"")!==a.versionNumber.replace(/\+dev/i,""))return d='soundManager: Fatal: JavaScript file build "'+a.versionNumber+'" does not match Flash SWF build "'+c+'" at '+a.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(d);},0),!1;setTimeout(Aa,S?100:1)};pa=function(c,
d){function e(){var b=[],c,d=[];c="SoundManager "+a.version+(!a.html5Only&&a.useHTML5Audio?a.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");a.html5Only?a.html5PollingInterval&&b.push("html5PollingInterval ("+a.html5PollingInterval+"ms)"):(a.preferFlash&&b.push("preferFlash"),a.useHighPerformance&&b.push("useHighPerformance"),a.flashPollingInterval&&b.push("flashPollingInterval ("+a.flashPollingInterval+"ms)"),a.html5PollingInterval&&b.push("html5PollingInterval ("+a.html5PollingInterval+
"ms)"),a.wmode&&b.push("wmode ("+a.wmode+")"),a.debugFlash&&b.push("debugFlash"),a.useFlashBlock&&b.push("flashBlock"));b.length&&(d=d.concat([b.join(" + ")]));a._wD(c+(d.length?" + "+d.join(", "):""),1);gb()}function b(b,c){return'<param name="'+b+'" value="'+c+'" />'}if(O&&z)return!1;if(a.html5Only)return Da(),e(),a.oMC=C(a.movieID),Aa(),z=O=!0,!1;var g=d||a.url,p=a.altURL||g,m=oa(),k=aa(),t=null,t=f.getElementsByTagName("html")[0],v,l,y,t=t&&t.dir&&t.dir.match(/rtl/i);c=c===h?a.id:c;Da();a.url=
Ya(la?g:p);d=a.url;a.wmode=!a.wmode&&a.useHighPerformance?"transparent":a.wmode;if(null!==a.wmode&&(s.match(/msie 8/i)||!S&&!a.useHighPerformance)&&navigator.platform.match(/win32|win64/i))U.push(P.spcWmode),a.wmode=null;m={name:c,id:c,src:d,quality:"high",allowScriptAccess:a.allowScriptAccess,bgcolor:a.bgColor,pluginspage:lb+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:a.wmode,hasPriority:"true"};a.debugFlash&&
(m.FlashVars="debug=1");a.wmode||delete m.wmode;if(S)g=f.createElement("div"),l=['<object id="'+c+'" data="'+d+'" type="'+m.type+'" title="'+m.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+lb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',b("movie",d),b("AllowScriptAccess",a.allowScriptAccess),b("quality",m.quality),a.wmode?b("wmode",a.wmode):"",b("bgcolor",a.bgColor),b("hasPriority","true"),a.debugFlash?b("FlashVars",m.FlashVars):"",
"</object>"].join("");else for(v in g=f.createElement("embed"),m)m.hasOwnProperty(v)&&g.setAttribute(v,m[v]);Ga();k=aa();if(m=oa())if(a.oMC=C(a.movieID)||f.createElement("div"),a.oMC.id)y=a.oMC.className,a.oMC.className=(y?y+" ":"movieContainer")+(k?" "+k:""),a.oMC.appendChild(g),S&&(v=a.oMC.appendChild(f.createElement("div")),v.className="sm2-object-box",v.innerHTML=l),z=!0;else{a.oMC.id=a.movieID;a.oMC.className="movieContainer "+k;v=k=null;a.useFlashBlock||(a.useHighPerformance?k={position:"fixed",
width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(k={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},t&&(k.left=Math.abs(parseInt(k.left,10))+"px")));qb&&(a.oMC.style.zIndex=1E4);if(!a.debugFlash)for(y in k)k.hasOwnProperty(y)&&(a.oMC.style[y]=k[y]);try{S||a.oMC.appendChild(g),m.appendChild(a.oMC),S&&(v=a.oMC.appendChild(f.createElement("div")),v.className="sm2-object-box",v.innerHTML=l),z=!0}catch(u){throw Error(x("domError")+" \n"+u.toString());}}O=
!0;e();return!0};na=function(){if(a.html5Only)return pa(),!1;if(n)return!1;if(!a.url)return u("noURL"),!1;n=a.getMovie(a.id);n||(fa?(S?a.oMC.innerHTML=Ia:a.oMC.appendChild(fa),fa=null,O=!0):pa(a.id,a.url),n=a.getMovie(a.id));"function"===typeof a.oninitmovie&&setTimeout(a.oninitmovie,1);Oa();return!0};Y=function(){setTimeout(Ua,1E3)};Ua=function(){var c,d=!1;if(!a.url||ga)return!1;ga=!0;B.remove(l,"load",Y);if(za&&!Sa)return u("waitFocus"),!1;t||(c=a.getMoviePercent(),0<c&&100>c&&(d=!0));setTimeout(function(){c=
a.getMoviePercent();if(d)return ga=!1,a._wD(x("waitSWF")),l.setTimeout(Y,1),!1;t||(a._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===c?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(a.debugFlash?" "+x("checkSWF"):""),2),!la&&c&&(u("localFail",2),a.debugFlash||u("tryDebug",2)),0===c&&a._wD(x("swf404",a.url),1),D("flashtojs",!1,": Timed out"+la?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"));!t&&jb&&(null===c?a.useFlashBlock||
0===a.flashLoadTimeout?(a.useFlashBlock&&Ja(),u("waitForever")):!a.useFlashBlock&&ua?l.setTimeout(function(){Q("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");a.setup({preferFlash:!1}).reboot();a.didFlashBlock=!0;a.beginDelayedInit()},1):(u("waitForever"),T({type:"ontimeout",ignoreInit:!0})):0===a.flashLoadTimeout?u("waitForever"):Ha(!0))},a.flashLoadTimeout)};ma=function(){if(Sa||!za)return B.remove(l,"focus",ma),!0;Sa=jb=!0;u("gotFocus");
ga=!1;Y();B.remove(l,"focus",ma);return!0};Oa=function(){U.length&&(a._wD("SoundManager 2: "+U.join(" "),1),U=[])};gb=function(){Oa();var c,d=[];if(a.useHTML5Audio&&a.hasHTML5){for(c in a.audioFormats)a.audioFormats.hasOwnProperty(c)&&d.push(c+" = "+a.html5[c]+(!a.html5[c]&&H&&a.flash[c]?" (using flash)":a.preferFlash&&a.flash[c]&&H?" (preferring flash)":!a.html5[c]?" ("+(a.audioFormats[c].required?"required, ":"")+"and no flash support)":""));a._wD("SoundManager 2 HTML5 support: "+d.join(", "),1)}};
da=function(c){if(t)return!1;if(a.html5Only)return u("sm2Loaded"),t=!0,X(),D("onload",!0),!0;var d=!0,e;if(!a.useFlashBlock||!a.flashLoadTimeout||a.getMoviePercent())t=!0,m&&(e={type:!N&&H?"NO_FLASH":"INIT_TIMEOUT"});a._wD("SoundManager 2 "+(m?"failed to load":"loaded")+" ("+(m?"Flash security/load error":"OK")+")",m?2:1);m||c?(a.useFlashBlock&&a.oMC&&(a.oMC.className=aa()+" "+(null===a.getMoviePercent()?"swf_timedout":"swf_error")),T({type:"ontimeout",error:e,ignoreInit:!0}),D("onload",!1),$(e),
d=!1):D("onload",!0);m||(a.waitForWindowLoad&&!I?(u("waitOnload"),B.add(l,"load",X)):(a.waitForWindowLoad&&I&&u("docLoaded"),X()));return d};y=function(){var c,d=a.setupOptions;for(c in d)d.hasOwnProperty(c)&&(a[c]===h?a[c]=d[c]:a[c]!==d[c]&&(a.setupOptions[c]=a[c]))};Aa=function(){if(t)return u("didInit"),!1;if(a.html5Only)return t||(B.remove(l,"load",a.beginDelayedInit),a.enabled=!0,da()),!0;na();try{n._externalInterfaceTest(!1),Va(!0,a.flashPollingInterval||(a.useHighPerformance?10:50)),a.debugMode||
n._disableDebug(),a.enabled=!0,D("jstoflash",!0),a.html5Only||B.add(l,"unload",v)}catch(c){return a._wD("js/flash exception: "+c.toString()),D("jstoflash",!1),$({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Ha(!0),da(),!1}da();B.remove(l,"load",a.beginDelayedInit);return!0};Z=function(){if(ea)return!1;ea=!0;y();Ga();var c=null,c=null,d=p.toLowerCase();-1!==d.indexOf("sm2-usehtml5audio=")&&(c="1"===d.charAt(d.indexOf("sm2-usehtml5audio=")+18),ka&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),
a.setup({useHTML5Audio:c}));-1!==d.indexOf("sm2-preferflash=")&&(c="1"===d.charAt(d.indexOf("sm2-preferflash=")+16),ka&&console.log((c?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),a.setup({preferFlash:c}));!N&&a.hasHTML5&&(a._wD("SoundManager: No Flash detected"+(!a.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1),a.setup({useHTML5Audio:!0,preferFlash:!1}));db();!N&&H&&(U.push(P.needFlash),a.setup({flashLoadTimeout:1}));f.removeEventListener&&f.removeEventListener("DOMContentLoaded",
Z,!1);na();return!0};La=function(){"complete"===f.readyState&&(Z(),f.detachEvent("onreadystatechange",La));return!0};Fa=function(){I=!0;B.remove(l,"load",Fa)};Ea=function(){if(Qa&&((!a.setupOptions.useHTML5Audio||a.setupOptions.preferFlash)&&U.push(P.mobileUA),a.setupOptions.useHTML5Audio=!0,a.setupOptions.preferFlash=!1,ja||ib&&!s.match(/android\s2\.3/i)))U.push(P.globalHTML5),ja&&(a.ignoreFlash=!0),J=!0};Ea();Na();B.add(l,"focus",ma);B.add(l,"load",Y);B.add(l,"load",Fa);f.addEventListener?f.addEventListener("DOMContentLoaded",
Z,!1):f.attachEvent?f.attachEvent("onreadystatechange",La):(D("onload",!1),$({type:"NO_DOM2_EVENTS",fatal:!0}))}var F=null;if(void 0===l.SM2_DEFER||!SM2_DEFER)F=new w;l.SoundManager=w;l.soundManager=F})(window);
(function(l,h){var w=function(l){var k=this;if(!(k instanceof w))return new w(l);k.el=h.getElementById(l);return{show:function(){k.el.setAttribute("data-shown",!0);k.el.removeAttribute("class")},hide:function(){k.el.dataset.shown&&(k.el.removeAttribute("data-shown"),k.el.className="hidden")}}};l.Dropdown=w})(window.o2,document);
(function(l,h){l.Pagination=function(h){var l=0;return{previousPage:function(){0<l&&(l--,h.publishResults(musicAjaxCall+"/page/"+l))},nextPage:function(){l++;h.publishResults(musicAjaxCall+"/page/"+l)},paging:function(h){var w=[],ba="",r="";0<l&&(ba='<a class="prev" data-el="prevPage" href="#">Prev Page</a>');h>=maxResults&&(r='<a class="next" data-el="nextPage" href="#">Next Page</a>');0<h&&(w.push('<span><a class="addAll" href="#" data-el="addAllResults">Add all these results to your playlist</a>'),
w.push(ba),w.push(r),w.push("</span>"));return w.join("")},reset:function(){l=0}}}})(window.o2);
(function(l,h,w,F){function k(a){s[a]||(s[a]=l.getElementById(a));return s[a]}function ob(a,f){var h=new XMLHttpRequest;h.onreadystatechange=function(){if(4===h.readyState&&200===h.status){var a=h.response;a.match(/^(\[|\{)/)&&f(JSON.parse(a))}};h.open("GET",a,!0);h.send()}var ba=function(){return{outStr:function(a){return encodeURI(JSON.stringify(a))},outObj:function(a){return JSON.parse(decodeURI(a))}}}();Date.prototype.customFormat=function(a){var f,h,k,l,q,n,r,s,w,z,t,m,I,u;h=((f=this.getFullYear())+
"").slice(-2);q=10>(n=this.getMonth()+1)?"0"+n:n;l=(k="January February March April May June July August September October November December".split(" ")[n-1]).substring(0,3);w=10>(z=this.getDate())?"0"+z:z;s=(r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[this.getDay()]).substring(0,3);u=10<=z&&20>=z?"th":1==(I=z%10)?"st":2==I?"nd":3==I?"rd":"th";a=a.replace("#YYYY#",f).replace("#YY#",h).replace("#MMMM#",k).replace("#MMM#",l).replace("#MM#",q).replace("#M#",n).replace("#DDDD#",
r).replace("#DDD#",s).replace("#DD#",w).replace("#D#",z).replace("#th#",u);k=f=this.getHours();0===k&&(k=24);12<k&&(k-=12);h=10>k?"0"+k:k;r=(n=12>f?"am":"pm").toUpperCase();l=10>(t=this.getMinutes())?"0"+t:t;q=10>(m=this.getSeconds())?"0"+m:m;return a.replace("#hhh#",f).replace("#hh#",h).replace("#h#",k).replace("#mm#",l).replace("#m#",t).replace("#ss#",q).replace("#s#",m).replace("#ampm#",n).replace("#AMPM#",r)};var r=l.body,ca=h.location.href,a="",K="",n=0,G=null,C=null,s=function(){if(!(this instanceof
s))return new s;w.useHTML5Audio=1;w.preferFlash=0;w.debugMode=0;w.url="i/";this.start()};s.prototype={start:function(){function a(f){f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");f=RegExp("[\\?&]"+f+"=([^&#]*)").exec(location.search);return null===f?"":decodeURIComponent(f[1].replace(/\+/g," "))}var f=this;f.drop=F.Dropdown("dropdown");f.pagination=F.Pagination(f);var v,y,s;y=/[\?&]([^=]+)=/g;for(var q=[],w={auto:function(){"1"!=q.indexOf("p")&&(n=!0)},s:function(){k("search").value=unescape(a("s"));
f.searchQuery()},p:function(){n=0;var h=unescape(a("p"));f.revealPlaylist();k("playlistScroll").innerHTML='<a href="'+h+'">'+h.replace(/(^o\/)|(.mp3)/g,"")+"</a>"},shuffle:function(){l.querySelector("#playlist .shuffle").id="on"}};null!==(v=y.exec(ca));)q.push(v[1]);v=0;for(s=q.length;v<s;v++)if(y=q[v],w[y])w[y]();ca.match(/\?/)||(k("omni").style.display="block",k("omniSearchForm").addEventListener("submit",function(a){a.preventDefault();k("search").value=k("omniSearch").value;f.searchQuery()}));
var V,D,O={playPause:f.togglePlayPause,search:function(a,h){var p=h.getAttribute("data-el"),l,v,n=k("dropSelect");(l={facetDrop:function(){dropdown.dataset.shown?f.drop.hide():f.drop.show()},facets:function(){n.innerHTML=h.innerHTML;n.dataset.select=h.dataset.select;f.drop.hide();(v=h.dataset.select)?n.dataset.select=v:n.removeAttribute("data-select")}}[p])&&l()},results:function(a,h){var p;(p={addAllResults:function(){f.revealPlaylist();k("playlistScroll").innerHTML+=K},prevPage:function(){f.pagination.previousPage()},
nextPage:function(){f.pagination.nextPage()}}[h.getAttribute("data-el")])?p():h.href&&(f.revealPlaylist(),k("playlistScroll").innerHTML+=a.target.outerHTML)},playlist:function(a,h){var p;if(p={clearPlaylist:function(){k("playlistScroll").innerHTML=""},shufflePlaylist:function(){f.isShuffled()?h.removeAttribute("id"):h.id="on"},deleteTrack:function(){k("playlistScroll").removeChild(h.parentNode)}}[h.getAttribute("data-el")])p();else{if(G=document.getElementById("playing"))G.removeAttribute("id"),G.removeAttribute("name");
G=h;f.queue()}},omni:function(a,p){C=null;var k={A:p,SPAN:p.parentNode},l=new Date,l={la$:"creationDate:["+1E3*(l-2592E6)+"%20TO%20"+1E3*l+"]",random:"playCount:>3%20AND%20lastPlayed:["+1E3*(l-10368E6)+"%20TO%20"+1E3*l+"]",popular:"playCount:>2%20AND%20lastPlayed:["+1E3*(l-31104E6)+"%20TO%20"+1E3*l+"]"};k[p.tagName]&&(C="http://o2dazone.com/music/search/"+l[k[p.tagName].getAttribute("data-el")]);C&&(f.publishResults(),f.replaceUrl(C,h.location.pathname+"?s="+l[k[p.tagName].getAttribute("data-el")]))}};
r.addEventListener("click",function(a){var h=a.target||null,p=h,k=h.tagName,l=0;f.drop.hide();if("A"===k||"SPAN"===k){for(;!O[p.getAttribute("data-el")]&&4>=l;){if("BODY"===p.tagName)return;p=p.parentNode;l++}4!==l&&(a.preventDefault(),O[p.getAttribute("data-el")](a,h))}});k("durationBar").addEventListener("click",function(a){f.song.setPosition(a.offsetX/this.clientWidth*f.song.duration);f.scrubTime(f.song)});h.isMobile||(h.onresize=function(){clearTimeout(V);clearTimeout(D);V=setTimeout(function(){r.className=
r.className.match(/anim/,"");D=setTimeout(function(){r.removeAttribute("class")},500)},50);r.className="resize anim";f.isPlaylistShowing()&&(700>h.innerWidth||300>h.innerHeight?"minimize"!==r.id&&(r.id="minimize"):""!==r.id&&r.removeAttribute("id"))});k("searchField").addEventListener("submit",function(a){a.preventDefault();f.searchQuery()},0);var z;k("playlistScroll").addEventListener("mouseover",function(a){z=a.target;"A"!==z.tagName||z.getElementsByTagName("SPAN").length||setTimeout(function(){z.innerHTML+=
'<span style="display:none;" data-el="deleteTrack">Remove</span>'},250)})},convertnsToDate:function(a){a=new Date(Math.round(a/1E3));return a.customFormat("#MMM# #D#, #YYYY#")+" at "+a.customFormat("#h#:#mm##ampm#")},togglePlayPause:function(a,f){f.className="play"===f.className?"pause":"play";w.togglePause("smObj")},isShuffled:function(){return document.getElementById("on")},isPlaylistShowing:function(){return!!k("playlist").style.opacity},replaceUrl:function(a,f){history.replaceState("searchResults",
a,f)},scrubTime:function(a){var f=a.position;a=a.duration;var h;k("progressBar").style.width=(100*(f/a)).toFixed(1)+"%";f/=1E3;a=f/3600>>0;f%=3600;h=f/60>>0;f=f%60>>0;k("time").innerHTML=(0<a?a+":":"")+(0<h?(0<a&&10>h?"0":"")+h+":":"0:")+(10>f?"0":"")+f},searchQuery:function(a){a=k("dropSelect");a=(a.dataset.select?a.dataset.select+":":"")+k("search").value;l.querySelectorAll("#results > p")[0].innerHTML="";""!==a&&(C="http://o2dazone.com/music/search/"+a,this.pagination.reset(),this.publishResults(),
this.replaceUrl(a,"?s="+a))},revealPlaylist:function(){var a=this;""===k("playlistScroll").innerHTML&&(a.isPlaylistShowing()||(k("playlist").style.opacity="1"),setTimeout(function(){G=k("playlistScroll").getElementsByTagName("A")[0];a.queue()},0))},queue:function(){var a=this;k("progressBar").style.width="0%";k("time").innerHTML="";G.id="playing";var f="o/"+unescape(G.href).replace(/^(.+?(\/o\/))/,"");a.song&&w.destroySound("smObj");a.song=w.createSound({id:"smObj",url:f,autoPlay:1,volume:100,whileplaying:function(){a.scrubTime(this)},
onfinish:function(){var f=document.getElementById("playing")||k("playlistScroll").getElementsByTagName("A")[0]||null;f&&(f.removeAttribute("id"),f.removeAttribute("name"),a.isShuffled()?(f=k("playlistScroll").getElementsByTagName("A"),G=f[Math.floor(Math.random()*f.length)]):G=null===f.nextSibling?k("playlistScroll").getElementsByTagName("A")[0]:f.nextSibling,G.setAttribute("name","play"),h.location="#play",a.queue())}});a.publishTrackInfo(G)},hideOmnibox:function(){document.getElementById("omni")&&
(k("omni").style.opacity=0,setTimeout(function(){k("omni").parentNode.removeChild(k("omni"))},500))},showResultsWin:function(){k("results").style.opacity||(k("results").style.opacity="1")},publishTrackInfo:function(a){a=ba.outObj(a.dataset.songdata);var f=a.albumArtUrl||"i/cover.png";l.title=a.artist+" - "+a.title;this.replaceUrl(a.id,"?"+h.location.href.split("?")[1].split("&p")[0]+"&p="+a.id);k("songInfo").innerHTML='<div class="album" style="background-image:url(\''+f+"')\"></div><h2>"+a.title+
"</h2><h3>"+a.artist+"</h3><h4>"+a.album+"</h4>"},getMusicQuery:function(a,f){var h=this;ob(a,function(a){h.queryResults=a;f(a)})},buildResults:function(){var a=this.queryResults,f,h,k,l;f=0;for(h=a.length;f<h;f++)k=a[f],l={album:k.album,title:k.title,artist:k.artist,id:k.id,albumArtUrl:k.albumArtUrl},K+='<a data-songdata="'+ba.outStr(l)+'" href="#">'+k.album+"/"+k.artist+" - "+k.title+"</a>"},resultCount:function(a){100<=a&&(a+="+");k("results").getElementsByTagName("p")[0].innerHTML=a+" results for <span> "+
k("search").value+"</span>"},publishResults:function(h){var f=this;f.hideOmnibox();f.showResultsWin();k("resultList").innerHTML="<h5>Loading...</h5>";f.getMusicQuery(h||C,function(h){var l=h.length;f.resultCount(l);!l||""===h[0]?k("resultList").innerHTML="<span>No results found.</span>":(a=K="",f.buildResults(),a+=f.pagination.paging(l),a+=K,k("resultList").innerHTML=a,n&&(n=0,f.revealPlaylist(),k("playlistScroll").innerHTML=K))})}};s()})(document,window,window.soundManager,window.o2);
